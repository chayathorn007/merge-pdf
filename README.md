# PDF OCR Backend System ЁЯУДЁЯдЦ

р╕гр╕░р╕Ър╕Ър╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е PDF р╕Фр╣Йр╕зр╕в AI р╕Чр╕╡р╣Ир╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Чр╕╡р╣И backend р╣Ар╕Юр╕╡р╕вр╕Зр╕нр╕вр╣Ир╕▓р╕Зр╣Ар╕Фр╕╡р╕вр╕з р╕Юр╕гр╣Йр╕нр╕б Web Interface р╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М

## тЬи р╕Др╕зр╕▓р╕бр╕кр╕▓р╕бр╕▓р╕гр╕Ц

- ЁЯУД **р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Ф PDF** р╕Ьр╣Ир╕▓р╕Щр╕лр╕Щр╣Йр╕▓р╣Ар╕зр╣Зр╕Ър╕Зр╣Ир╕▓р╕вр╣Ж 
- ЁЯдЦ **р╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕ер╕Фр╣Йр╕зр╕в AI** (OpenAI GPT) 
- ЁЯУЛ **р╣Бр╕вр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е** р╕Ир╕▓р╕Б Shopee р╣Бр╕ер╕░р╣Бр╕Юр╕ер╕Хр╕Яр╕нр╕гр╣Мр╕бр╕нр╕╡р╕Др╕нр╕бр╣Ар╕бр╕┤р╕гр╣Мр╕Лр╕нр╕╖р╣Ир╕Щр╣Ж
- ЁЯП╖я╕П **р╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕Ър╕Ыр╕░р╕лр╕Щр╣Йр╕▓** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕Др╕╖р╕Щр╕кр╕┤р╕Щр╕Др╣Йр╕▓
- ЁЯУж **р╕гр╕зр╕б PDF** р╣Ар╕Фр╕┤р╕бр╣Бр╕ер╕░р╣Гр╕Ър╕Ыр╕░р╕лр╕Щр╣Йр╕▓р╣Гр╕Щр╣Др╕Яр╕ер╣Мр╣Ар╕Фр╕╡р╕вр╕з
- тмЗя╕П **р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Фр╣Др╕Яр╕ер╣М** р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

## ЁЯЪи р╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓ Error 524 (Timeout)

р╕лр╕▓р╕Бр╕Др╕╕р╕Ур╕Юр╕Ъ **Error 524** р╕лр╕гр╕╖р╕нр╕Ыр╕▒р╕Нр╕лр╕▓ timeout р╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е:

### р╕кр╕▓р╣Ар╕лр╕Хр╕╕:
- р╣Др╕Яр╕ер╣М PDF р╕бр╕╡р╕Вр╕Щр╕▓р╕Фр╣Гр╕лр╕Нр╣Ир╣Ар╕Бр╕┤р╕Щр╣Др╕Ы
- AI processing р╣Гр╕Кр╣Йр╣Ар╕зр╕ер╕▓р╕Щр╕▓р╕Щр╣Ар╕Бр╕┤р╕Щ CloudFlare timeout (100 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡) 
- р╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕ер╕лр╕ер╕▓р╕вр╕лр╕Щр╣Йр╕▓р╣Гр╕Кр╣Йр╣Ар╕зр╕ер╕▓р╕Щр╕▓р╕Щр╕бр╕▓р╕Б

### р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╣Др╕В:

1. **р╣Гр╕Кр╣Йр╣Др╕Яр╕ер╣М PDF р╕Чр╕╡р╣Ир╣Ар╕ер╣Зр╕Бр╕Бр╕зр╣Ир╕▓**
   - р╕Вр╕Щр╕▓р╕Фр╣Др╕Яр╕ер╣Мр╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 20MB
   - р╕Ир╕│р╕Щр╕зр╕Щр╕лр╕Щр╣Йр╕▓р╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 10 р╕лр╕Щр╣Йр╕▓

2. **р╣Бр╕вр╕Бр╣Др╕Яр╕ер╣М PDF р╕Вр╕Щр╕▓р╕Фр╣Гр╕лр╕Нр╣И**
   - р╣Бр╕Ър╣Ир╕Зр╣Др╕Яр╕ер╣Мр╣Гр╕лр╕Нр╣Ир╣Ар╕Ыр╣Зр╕Щр╣Др╕Яр╕ер╣Мр╣Ар╕ер╣Зр╕Бр╣Ж р╕лр╕ер╕▓р╕вр╣Др╕Яр╕ер╣М
   - р╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕ер╕Чр╕╡р╕ер╕░р╣Др╕Яр╕ер╣М

3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕Вр╕нр╕Зр╣Др╕Яр╕ер╣М PDF**
   - р╣Др╕Яр╕ер╣М PDF р╕Др╕зр╕гр╕бр╕╡р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Чр╕╡р╣Ир╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ (р╣Др╕бр╣Ир╣Гр╕Кр╣Ир╕ар╕▓р╕Юр╕кр╣Бр╕Бр╕Щ)
   - р╕лр╕ер╕╡р╕Бр╣Ар╕ер╕╡р╣Ир╕вр╕Зр╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕бр╕╡р╕ар╕▓р╕Юр╣Ар╕вр╕нр╕░

4. **р╕ер╕нр╕Зр╣Гр╕лр╕бр╣Ир╕лр╕▓р╕Бр╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф**
   - р╕гр╕░р╕Ър╕Ър╕бр╕╡ fallback mechanism р╕Чр╕╡р╣Ир╕Ир╕░р╣Гр╕лр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕гр╕нр╕З
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б Refresh р╣Бр╕ер╕░р╕ер╕нр╕Зр╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╣Гр╕лр╕бр╣И

### р╕гр╕░р╕Ър╕Ър╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Бр╕ер╣Йр╕з:
- тЬЕ **р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ timeout р╕Чр╕╡р╣И 5 р╕Щр╕▓р╕Чр╕╡** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е
- тЬЕ **р╕Ир╕│р╕Бр╕▒р╕Фр╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕ер╣Др╕бр╣Ир╣Ар╕Бр╕┤р╕Щ 10 р╕лр╕Щр╣Йр╕▓** р╣Ар╕Юр╕╖р╣Ир╕нр╕ер╕Ф timeout
- тЬЕ **р╣Ар╕Юр╕┤р╣Ир╕б fallback data** р╣Ар╕бр╕╖р╣Ир╕н AI р╕ер╣Йр╕бр╣Ар╕лр╕ер╕з
- тЬЕ **р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З error handling** р╣Бр╕ер╕░р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ
- тЬЕ **р╣Ар╕Юр╕┤р╣Ир╕б retry mechanism** р╕кр╕│р╕лр╕гр╕▒р╕Ъ OpenAI API

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕гр╕▒р╕Щ Backend

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╕гр╕▒р╕Щр╕Фр╣Йр╕зр╕в Docker (р╣Бр╕Щр╕░р╕Щр╕│)

```bash
# р╕гр╕▒р╕Щр╕Фр╣Йр╕зр╕в script р╕Чр╕╡р╣Ир╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Др╕зр╣Й
./start-docker.sh

# р╕лр╕гр╕╖р╕нр╕гр╕▒р╕Щр╕Фр╣Йр╕зр╕в docker-compose р╣Вр╕Фр╕вр╕Хр╕гр╕З
docker-compose up --build backend
```

### р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╕гр╕▒р╕Щр╣Бр╕Ър╕Ъ Development

```bash
cd src/server/
npm install
npx ts-node index.ts

# р╕лр╕гр╕╖р╕нр╣Гр╕Кр╣Й script р╕Чр╕╡р╣Ир╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Др╕зр╣Й
./start.sh
```

## ЁЯМР р╕Бр╕▓р╕гр╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕гр╕▒р╕Щ server р╣Бр╕ер╣Йр╕з р╣Ар╕Ыр╕┤р╕Фр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╣Др╕Ыр╕Чр╕╡р╣И:

- **р╕лр╕Щр╣Йр╕▓р╕лр╕ер╕▒р╕Б:** http://localhost:3001/
- **р╕лр╕Щр╣Йр╕▓р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Ф:** http://localhost:3001/upload

## ЁЯФз р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓

### OpenAI API Key

р╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Йр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ OpenAI API Key р╣Др╕зр╣Йр╣Бр╕ер╣Йр╕зр╣Гр╕Щ `docker-compose.yml` 

## ЁЯУК р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Фр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ъ

- **р╕Вр╕Щр╕▓р╕Фр╣Др╕Яр╕ер╣М:** р╕кр╕╣р╕Зр╕кр╕╕р╕Ф 20MB
- **р╕Ир╕│р╕Щр╕зр╕Щр╕лр╕Щр╣Йр╕▓:** р╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕ер╣Др╕Фр╣Йр╕кр╕╣р╕Зр╕кр╕╕р╕Ф 10 р╕лр╕Щр╣Йр╕▓
- **р╣Ар╕зр╕ер╕▓р╕Ыр╕гр╕░р╕бр╕зр╕ер╕Ьр╕е:** р╕кр╕╣р╕Зр╕кр╕╕р╕Ф 5 р╕Щр╕▓р╕Чр╕╡
- **р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╣Др╕Яр╕ер╣М:** р╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Ар╕Йр╕Юр╕▓р╕░ PDF р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ

## ЁЯФН р╕Бр╕▓р╕г Debug

р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╕Юр╕Ър╕Ыр╕▒р╕Нр╕лр╕▓ р╣Гр╕лр╣Йр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ:

1. **Console Log р╣Гр╕Щр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М** (F12 тЖТ Console)
2. **Server Log** р╣Гр╕Щ terminal р╕Чр╕╡р╣Ир╕гр╕▒р╕Щ backend
3. **р╕Вр╕Щр╕▓р╕Фр╣Бр╕ер╕░р╕Др╕╕р╕Ур╕ар╕▓р╕Юр╕Вр╕нр╕Зр╣Др╕Яр╕ер╣М PDF**

## ЁЯУЮ р╕Бр╕▓р╕гр╕кр╕Щр╕▒р╕Ър╕кр╕Щр╕╕р╕Щ

р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╕Юр╕Ър╕Ыр╕▒р╕Нр╕лр╕▓ р╕Бр╕гр╕╕р╕Ур╕▓:
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ log р╣Гр╕Щ terminal р╣Бр╕ер╕░ browser console
- р╕ер╕нр╕Зр╣Гр╕Кр╣Йр╣Др╕Яр╕ер╣М PDF р╕Чр╕╡р╣Ир╣Ар╕ер╣Зр╕Бр╕Бр╕зр╣Ир╕▓
- р╕ер╕нр╕Зр╕гр╕╡р╕кр╕Хр╕▓р╕гр╣Мр╕Чр╕гр╕░р╕Ър╕Ъ

---

*р╕гр╕░р╕Ър╕Ър╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╕ер╕Фр╕Ыр╕▒р╕Нр╕лр╕▓ timeout р╣Бр╕ер╕░р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕зр╕▓р╕бр╣Ар╕кр╕Цр╕╡р╕вр╕г*
